System.register("chunks:///_virtual/AsyncManager.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"15d1f9EPfFOxKvNjzFu16nO","AsyncManager",void 0);e("asyncManager",new(function(){function e(){this.map={}}var t=e.prototype;return t.waitResult=function(e,t,n){console.log("start async");var c=this.map[e];c&&c.reject("conflict");var r={resolve:null,reject:null};this.map[e]=r,new Promise((function(e,t){r.resolve=e,r.reject=t})).then(t).catch(n)},t.resolve=function(e,t){var n=this.map[e];n&&(n.resolve(t),console.log("resolve",e),this.map[e]=null)},t.reject=function(e,t){var n=this.map[e];n&&(n.reject(t),this.map[e]=null)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/MainLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts","./AsyncManager.ts","./TaskDetailPanel.ts"],(function(t){"use strict";var e,n,a,i,r,o,s,l,u,c,d,p,f,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Prefab,l=t.Node,u=t.instantiate,c=t.Label,d=t.Button,p=t.Component},function(t){f=t.TD},function(t){h=t.asyncManager},function(t){b=t.TaskDetailPanel}],execute:function(){var y,g,k,m,v,P,D,L,T,C,A;r._RF.push({},"fd22ay4HCtBGqZHv8XGvL2F","MainLayer",void 0);var w=o.ccclass,M=o.property;t("MainLayer",(y=w("MainLayer"),g=M(s),k=M(s),m=M(s),v=M(l),y((L=e((D=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"prefabAddPanel",L,i(e)),a(e,"prefabTaskDetailPanel",T,i(e)),a(e,"taskItem",C,i(e)),a(e,"listContent",A,i(e)),e}n(e,t);var r=e.prototype;return r.start=function(){f.loadData(),this.updateList()},r.showAddPanel=function(){var t=this,e=u(this.prefabAddPanel);this.node.addChild(e),h.waitResult("TaskAddPanel",(function(){t.updateList()}))},r.updateList=function(){this.listContent.destroyAllChildren();for(var t=0;t<f.tasksId.length;t++){var e=f.tasksId[t],n=f.getTaskData(e),a=u(this.taskItem);a.active=!0,a.parent=this.listContent,a.getChildByName("Label").getComponent(c).string=n.name;var i=a.getComponent(d).clickEvents[0];i.customEventData=n.id.toString(),i.target=this.node,i.handler="onBtnTask",i.component="MainLayer"}},r.onBtnAdd=function(){this.showAddPanel()},r.onBtnTask=function(t,e){var n=u(this.prefabTaskDetailPanel);n.parent=this.node,n.getComponent(b).data_setTaskId(Number(e))},e}(p)).prototype,"prefabAddPanel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(D.prototype,"prefabTaskDetailPanel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(D.prototype,"taskItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(D.prototype,"listContent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./TaskData.ts","./AsyncManager.ts","./MainLayer.ts","./TaskAddPanel.ts","./TaskDetailPanel.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/TaskAddPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts","./AsyncManager.ts"],(function(e){"use strict";var n,t,r,o,a,i,s,c,l,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,s=e.EditBox,c=e.Component},function(e){l=e.TD},function(e){d=e.asyncManager}],execute:function(){var u,p,f,y,v;a._RF.push({},"76f7cy7YiZD8pqOPFvvIoZ8","TaskAddPanel",void 0);var h=i.ccclass,T=i.property;e("TaskAddPanel",(u=h("TaskAddPanel"),p=T(s),u((v=n((y=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"editBox",v,o(n)),n}t(n,e);var a=n.prototype;return a.onBtnConfirm=function(){var e=this.editBox.string;l.addTask(e),this.node.destroy(),d.resolve("TaskAddPanel")},a.onBtnClose=function(){this.node.destroy(),d.resolve("TaskAddPanel")},n}(c)).prototype,"editBox",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/TaskData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var a,s,e;return{setters:[function(t){a=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,e=t.sys}],execute:function(){s._RF.push({},"603bc7s6u9AHqFbaqfvDZj7","TaskData",void 0);var i="TaskItemsName",n="Task_",r=t("TaskData",function(){function t(){this.tasksId=[],this.tasksData=[]}var s=t.prototype;return s.loadData=function(){var t=e.localStorage.getItem(i);if(t){var s=JSON.parse(t);this.tasksId=s}for(var r,o=a(this.tasksId);!(r=o()).done;){var c=r.value,u=e.localStorage.getItem(n+c);if(u){var k=JSON.parse(u);this.tasksData.push(k)}}},s.getTaskData=function(t){if("number"==typeof t)return this.tasksData.find((function(a){return a.id==t}))},s.setTaskLength=function(t,a){var s=this.getTaskData(t);s&&(s.length=a,this.writeTaskData(t))},s.setTaskPercent=function(t,a,s){var e=this.getTaskData(t);if(e){var i=this.taskIndexToBit(a),n=i.numIndex,r=i.bit,o=e.percent[n];if(1==s)null==o&&(e.percent.length=n+1,o=0),o!=(o|=1<<r-1)&&(e.percent[n]=o,this.writeTaskData(t));else if(0==s){if(o)o!=(o&=~(1<<r-1))&&(e.percent[n]=o,this.writeTaskData(t))}}},s.getTaskPercentState=function(t,a){var s=this.getTaskData(t);if(s){var e=this.taskIndexToBit(a),i=e.numIndex,n=e.bit,r=s.percent[i];return r?r&1<<n-1:0}},s.addTask=function(t){var a=this.genId();this.tasksId.push(a);var s={id:a,name:t,length:100,percent:[]};this.tasksData.push(s),this.writeTaskData(a),e.localStorage.setItem(i,JSON.stringify(this.tasksId))},s.removeTask=function(t){var a=this.tasksId.indexOf(t);-1!=a&&(this.tasksId.splice(a,1),e.localStorage.setItem(i,JSON.stringify(this.tasksId)),-1!=(a=this.tasksData.findIndex((function(a){return a.id==t})))&&(this.tasksData.splice(a,1),e.localStorage.removeItem(n+t)))},s.genId=function(){return 0==this.tasksId.length?0:this.tasksId[this.tasksId.length-1]+1},s.writeTaskData=function(t){var a=this.getTaskData(t);a&&e.localStorage.setItem(n+t,JSON.stringify(a))},s.taskIndexToBit=function(t){var a=(t+1)%32;return{numIndex:Math.ceil((t+1)/32)-1,bit:a=0==a?32:a}},t}());t("TD",new r);s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskDetailPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts"],(function(t){"use strict";var e,a,n,i,r,o,s,l,c,u,p,d,h,T,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,l=t.Prefab,c=t.Label,u=t.instantiate,p=t.Sprite,d=t.Color,h=t.Button,T=t.Component},function(t){f=t.TD}],execute:function(){var k,C,g,E,P,m,b;r._RF.push({},"7e2c42dzhZJYb5Fp1fdhwH5","TaskDetailPanel",void 0);var v,D=o.ccclass,y=o.property;!function(t){t[t.UNCOMPLETE=0]="UNCOMPLETE",t[t.COMPLETE=1]="COMPLETE"}(v||(v={}));t("TaskDetailPanel",(k=D("TaskDetailPanel"),C=y(s),g=y(l),k((m=e((P=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"listContent",m,i(e)),n(e,"prefabTaskDetailItem",b,i(e)),e.data_taskId=null,e}a(e,t);var r=e.prototype;return r.data_setTaskId=function(t){this.data_taskId=t,this.updateView()},r.updateView=function(){var t=f.getTaskData(this.data_taskId);this.node.getChildByName("Label").getComponent(c).string=t.name,this.listContent.destroyAllChildren();for(var e=t.length,a=0;a<e;a++){var n=f.getTaskPercentState(this.data_taskId,a),i=u(this.prefabTaskDetailItem);i.active=!0,i.parent=this.listContent,i.getComponent(p).color=n==v.UNCOMPLETE?d.WHITE:new d("#47E4DE"),i.getChildByName("Label").getComponent(c).string=(a+1).toString();var r=i.getComponent(h).clickEvents[0];r.customEventData=a.toString(),r.target=this.node,r.component="TaskDetailPanel",r.handler="onBtnMark"}},r.onBtnMark=function(t,e){var a=Number(e),n=f.getTaskPercentState(this.data_taskId,a)==v.UNCOMPLETE?v.COMPLETE:v.UNCOMPLETE;f.setTaskPercent(this.data_taskId,a,n),this.updateView()},r.onBtnClose=function(){this.node.active=!1},e}(T)).prototype,"listContent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(P.prototype,"prefabTaskDetailItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=P))||E));r._RF.pop()}}}));
